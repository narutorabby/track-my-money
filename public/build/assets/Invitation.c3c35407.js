import{d as V,c as r,o as c,a as e,_ as P,u as S,C as E,k as $,r as A,b as o,w as n,e as z,f as F,m as M,g as s,F as f,B as b,l as k,t as p,i as v,q as R}from"./app.2b3a961c.js";import"./moment.9709ab41.js";import{C as q}from"./Check.ed9b0b27.js";const G={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 352 512"},O=e("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"},null,-1),Y=[O],j=V({name:"Times",render:function(u,x){return c(),r("svg",G,Y)}}),H={components:{Check:q,Times:j},setup(){const C=z();F(),M();const u=S(),x=E(),i=$(()=>C.getters.userData||null),m=A(!0),y=A([]),h=A(),d=()=>{m.value=!0,axios.get("/api/invitation/list").then(l=>{l.data.response=="success"?y.value=l.data.data:u.error("Error fetching list. Please reload!"),m.value=!1})};return d(),{userData:i,pageLoading:m,invitations:y,invitation:h,getInvitations:d,invitationAction:(l,a)=>{const g=x.success({title:a+" invitation",content:a+" this invitation! Are you sure?",negativeText:"No",positiveText:"Yes",onPositiveClick:()=>(g.loading=!0,new Promise(w=>{axios.post("/api/invitation/invitation-action/"+l,{status:a=="Accept"?"Accepted":a=="Decline"?"Declined":a=="Cancel"?"Canceled":""}).then(_=>{_.data.response=="success"?(u.success(_.data.message),d()):u.error(_.data.message)}).catch(()=>{u.error("Could not "+a.toLowerCase()+" invitation!")}).then(w)}))})}}}},J={id:"invitations"},K=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Group"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Status"),e("th")])],-1),Q={style:{"text-align":"end"}},U=v(" Accept "),W=v(" Decline "),X=v(" Cancel ");function Z(C,u,x,i,m,y){const h=s("n-skeleton"),d=s("n-tag"),L=s("check"),l=s("n-icon"),a=s("n-button"),g=s("times"),w=s("n-button-group"),_=s("n-table"),T=s("n-empty"),B=s("n-space"),I=s("n-card");return c(),r("section",J,[o(I,{title:"INVITATIONS"},{default:n(()=>[o(B,{class:"data-container",vertical:""},{default:n(()=>[i.pageLoading?(c(),r(f,{key:0},[o(h,{height:"50px"}),(c(),r(f,null,b(10,t=>o(h,{key:t,height:"50px"})),64))],64)):i.invitations&&i.invitations.length>0?(c(),k(_,{key:1,striped:""},{default:n(()=>[K,e("tbody",null,[(c(!0),r(f,null,b(i.invitations,(t,D)=>(c(),r("tr",{key:D},[e("td",null,p(D+1),1),e("td",null,p(t.group.name),1),e("td",null,p(t.user.name),1),e("td",null,p(t.user.email),1),e("td",null,[o(d,{type:t.status=="Accepted"?"success":t.status=="Declined"?"warning":t.status=="Canceled"?"error":"info"},{default:n(()=>[v(p(t.status),1)]),_:2},1032,["type"])]),e("td",Q,[t.status=="Pending"?(c(),k(w,{key:0},{default:n(()=>[t.received?(c(),r(f,{key:0},[o(a,{round:"",onClick:N=>i.invitationAction(t.id,"Accept")},{icon:n(()=>[o(l,null,{default:n(()=>[o(L)]),_:1})]),default:n(()=>[U]),_:2},1032,["onClick"]),o(a,{round:"",onClick:N=>i.invitationAction(t.id,"Decline")},{icon:n(()=>[o(l,null,{default:n(()=>[o(g)]),_:1})]),default:n(()=>[W]),_:2},1032,["onClick"])],64)):(c(),k(a,{key:1,round:"",onClick:N=>i.invitationAction(t.id,"Cancel")},{icon:n(()=>[o(l,null,{default:n(()=>[o(g)]),_:1})]),default:n(()=>[X]),_:2},1032,["onClick"]))]),_:2},1024)):R("",!0)])]))),128))])]),_:1})):(c(),k(T,{key:2,class:"empty",size:"huge",description:"No invitations found"}))]),_:1})]),_:1})])}const oe=P(H,[["render",Z]]);export{oe as default};
